<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `RTree` struct in crate `spade`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, RTree">

    <title>spade::RTree - Rust</title>

    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='index.html'>spade</a></p><script>window.sidebarCurrent = {name: 'RTree', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>spade</a>::<wbr><a class='struct' href=''>RTree</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-749' class='srclink' href='../src/spade/src/rtree.rs.html#1006-1010' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct RTree&lt;T&gt; <span class='where'>where T: <a class='trait' href='../spade/trait.SpatialObject.html' title='spade::SpatialObject'>SpatialObject</a></span> {
    // some fields omitted
}</pre><div class='docblock'><p>A rust implementation of n dimensional r*-trees</p>

<p><a href="https://en.wikipedia.org/wiki/R-tree">R-trees</a> provide efficient nearest-neighbor searches for
many objects. <a href="https://en.wikipedia.org/wiki/R*_tree">R*-trees</a> (&quot;R-Star-Trees&quot;) 
are a common variant of r-trees and use more advanced heuristics to improve query performance. This
struct implements r*-trees, despite its name.
Instead of linear time complexity, r-trees yield logarithmic complexity
for look-up operations and nearest neighbor queries. Inserting into an r-tree runs in O(log(n)) time on average.
Some simple simple geometric primitives that can be inserted into an r-tree can be found in 
the <code>primitives</code> module. If your object is not among those, consider
implementing the <code>SpatialObject</code> trait.</p>

<p>Note that the <code>rtree</code>-infrastructure works with 2, 3 and 4 dimensional vectors from the <code>nalgebra</code>
and <code>cgmath</code> package with both integral and floating point scalar types:</p>

<pre class='rust rust-example-rendered'>


  <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>tree</span> <span class='op'>=</span> <span class='ident'>RTree</span>::<span class='ident'>new</span>();
  <span class='ident'>tree</span>.<span class='ident'>insert</span>(<span class='ident'>Vector4</span>::<span class='ident'>new</span>(<span class='number'>13i32</span>, <span class='number'>10</span>, <span class='number'>10</span>, <span class='number'>37</span>)); <span class='comment'>// Note that this is an integer vector</span></pre>

<h1 id='basic-example' class='section-header'><a href='#basic-example'>Basic Example</a></h1>
<pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>cgmath</span>; <span class='comment'>// Alternativeley: use nalgebra</span>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>spade</span>;

<span class='kw'>use</span> <span class='ident'>spade</span>::<span class='ident'>RTree</span>;
<span class='kw'>use</span> <span class='ident'>cgmath</span>::<span class='ident'>Vector2</span>;

<span class='kw'>fn</span> <span class='ident'>main</span>() {
<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>rtree</span> <span class='op'>=</span> <span class='ident'>RTree</span>::<span class='ident'>new</span>();
<span class='comment'>// Insert two points</span>
<span class='ident'>rtree</span>.<span class='ident'>insert</span>(<span class='ident'>Vector2</span>::<span class='ident'>new</span>(<span class='number'>0.5</span>, <span class='number'>0.5f32</span>));
<span class='ident'>rtree</span>.<span class='ident'>insert</span>(<span class='ident'>Vector2</span>::<span class='ident'>new</span>(<span class='number'>1.0</span>, <span class='number'>1.0f32</span>));

<span class='kw'>if</span> <span class='ident'>rtree</span>.<span class='ident'>lookup</span>(<span class='kw-2'>&amp;</span><span class='ident'>Vector2</span>::<span class='ident'>new</span>(<span class='number'>0.5</span>, <span class='number'>0.5</span>)).<span class='ident'>is_some</span>() {
  <span class='macro'>println</span><span class='macro'>!</span>(<span class='string'>&quot;We&#39;fe found a point at [0.5, 0.5]/&quot;</span>);
}
 
<span class='kw'>let</span> <span class='ident'>nearest</span> <span class='op'>=</span> <span class='ident'>rtree</span>.<span class='ident'>nearest_neighbor</span>(<span class='kw-2'>&amp;</span><span class='ident'>Vector2</span>::<span class='ident'>new</span>(<span class='number'>1.5</span>, <span class='number'>1.5</span>)).<span class='ident'>unwrap</span>();
<span class='macro'>println</span><span class='macro'>!</span>(<span class='string'>&quot;nearest neighbor at [1.5, 1.5]: {:?}&quot;</span>, <span class='ident'>nearest</span>);

<span class='comment'>// Iterate over all elements</span>
<span class='kw'>for</span> <span class='ident'>point</span> <span class='kw'>in</span> <span class='ident'>rtree</span>.<span class='ident'>iter</span>() {
  <span class='macro'>println</span><span class='macro'>!</span>(<span class='string'>&quot;Found point: {:?}&quot;</span>, <span class='ident'>point</span>);
}
}</pre>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><span class='in-band'><code>impl&lt;T&gt; <a class='struct' href='../spade/struct.RTree.html' title='spade::RTree'>RTree</a>&lt;T&gt; <span class='where'>where T: <a class='trait' href='../spade/trait.SpatialObject.html' title='spade::SpatialObject'>SpatialObject</a></span></code></span><span class='out-of-band'><div class='ghost'></div><a id='src-756' class='srclink' href='../src/spade/src/rtree.rs.html#1018-1205' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.new' class='method'><code>fn <a href='#method.new' class='fnname'>new</a>() -&gt; <a class='struct' href='../spade/struct.RTree.html' title='spade::RTree'>RTree</a>&lt;T&gt;</code></h4>
<div class='docblock'><p>Creates an empty r*-tree.</p>
</div><h4 id='method.mbr' class='method'><code>fn <a href='#method.mbr' class='fnname'>mbr</a>(&amp;self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='../spade/struct.BoundingRect.html' title='spade::BoundingRect'>BoundingRect</a>&lt;T::Vector&gt;&gt;</code></h4>
<div class='docblock'><p>Returns the trees minimal bounding box.</p>
</div><h4 id='method.size' class='method'><code>fn <a href='#method.size' class='fnname'>size</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a></code></h4>
<div class='docblock'><p>Returns the number of elements contained in this r-tree.</p>
</div><h4 id='method.iter' class='method'><code>fn <a href='#method.iter' class='fnname'>iter</a>(&amp;self) -&gt; <a class='struct' href='../spade/struct.RTreeIterator.html' title='spade::RTreeIterator'>RTreeIterator</a>&lt;T&gt;</code></h4>
<div class='docblock'><p>Returns an iterator over all contained elements.</p>
</div><h4 id='method.insert' class='method'><code>fn <a href='#method.insert' class='fnname'>insert</a>(&amp;mut self, t: T)</code></h4>
<div class='docblock'><p>Inserts a new element into the tree.</p>

<p>This will require <code>O(log(n))</code> operations on average, where n is the number of elements contained
in the tree.</p>
</div><h4 id='method.lookup_and_remove' class='method'><code>fn <a href='#method.lookup_and_remove' class='fnname'>lookup_and_remove</a>(&amp;mut self, query_point: &amp;T::Vector) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;T&gt;</code></h4>
<div class='docblock'><p>Searches for an element and removes it.</p>

<p>If the given point is contained by one object in the tree, this object is being removed
and returned. If the point is contained by multiple objects, only one of them is removed and
returned.</p>
</div><h4 id='method.lookup' class='method'><code>fn <a href='#method.lookup' class='fnname'>lookup</a>(&amp;self, query_point: &amp;T::Vector) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;&amp;T&gt;</code></h4>
<div class='docblock'><p>Searches for an element at a given position.</p>

<p>If <code>query_point</code> is contained by one object in the tree, this object will be returned.
If multiple objects contain the point, only one of them will be returned.</p>
</div><h4 id='method.lookup_mut' class='method'><code>fn <a href='#method.lookup_mut' class='fnname'>lookup_mut</a>(&amp;mut self, query_point: &amp;T::Vector) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;&amp;mut T&gt;</code></h4>
<div class='docblock'><p>Searches for an element at a given position and returns a mutable
reference.
If <code>query_point</code> is contained by multiple objects in the tree,
one of them will be returned.
<em>Do not change the object&#39;s minimal bounding box</em>.</p>
</div><h4 id='method.nearest_neighbor' class='method'><code>fn <a href='#method.nearest_neighbor' class='fnname'>nearest_neighbor</a>(&amp;self, query_point: &amp;T::Vector) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;&amp;T&gt;</code></h4>
<div class='docblock'><p>Returns the nearest neighbor.</p>

<p>Returns <code>None</code> if the tree is empty.</p>
</div><h4 id='method.close_neighbor' class='method'><code>fn <a href='#method.close_neighbor' class='fnname'>close_neighbor</a>(&amp;self, query_point: &amp;T::Vector) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;&amp;T&gt;</code></h4>
<div class='docblock'><p>Returns an object close to a given point. This operation is faster than
<code>nearest_neighbor</code> but will not neccessarily yield the real nearest neighbor.</p>
</div><h4 id='method.nearest_neighbors' class='method'><code>fn <a href='#method.nearest_neighbors' class='fnname'>nearest_neighbors</a>(&amp;self, query_point: &amp;T::Vector) -&gt; <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;&amp;T&gt;</code></h4>
<div class='docblock'><p>Returns the nearest neighbors of a given point.</p>

<p>All returned values will have the exact same distance from the given query point.
Returns an empty vector if the tree is empty.</p>
</div><h4 id='method.nearest_n_neighbors' class='method'><code>fn <a href='#method.nearest_n_neighbors' class='fnname'>nearest_n_neighbors</a>(&amp;self, query_point: &amp;T::Vector, n: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>) -&gt; <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;&amp;T&gt;</code></h4>
<div class='docblock'><p>Returns the nearest n neighbors.</p>
</div><h4 id='method.lookup_in_rectangle' class='method'><code>fn <a href='#method.lookup_in_rectangle' class='fnname'>lookup_in_rectangle</a>(&amp;self, query_rect: &amp;<a class='struct' href='../spade/struct.BoundingRect.html' title='spade::BoundingRect'>BoundingRect</a>&lt;T::Vector&gt;) -&gt; <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;&amp;T&gt;</code></h4>
<div class='docblock'><p>Returns all objects (partially) contained in a rectangle</p>
</div><h4 id='method.lookup_in_circle' class='method'><code>fn <a href='#method.lookup_in_circle' class='fnname'>lookup_in_circle</a>(&amp;self, circle_origin: &amp;T::Vector, radius2: &amp;T::Vector::Scalar) -&gt; <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;&amp;T&gt;</code></h4>
<div class='docblock'><p>Returns all objects (partially) contained in a circle.</p>

<p>Note that <code>radius2</code> is the circle&#39;s squared radius, not the actual radius.
An object is contained if a part of it lies within the circle.</p>
</div></div><h3 class='impl'><span class='in-band'><code>impl&lt;T&gt; <a class='struct' href='../spade/struct.RTree.html' title='spade::RTree'>RTree</a>&lt;T&gt; <span class='where'>where T: <a class='trait' href='../spade/trait.SpatialObject.html' title='spade::SpatialObject'>SpatialObject</a> + <a class='trait' href='https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html' title='core::cmp::PartialEq'>PartialEq</a></span></code></span><span class='out-of-band'><div class='ghost'></div><a id='src-818' class='srclink' href='../src/spade/src/rtree.rs.html#1207-1230' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.remove' class='method'><code>fn <a href='#method.remove' class='fnname'>remove</a>(&amp;mut self, obj: &amp;T) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></h4>
<div class='docblock'><p>Removes an object from the tree.</p>

<p>Locates and removes an object from the tree, returning
<code>true</code> if the element could be removed.
If multiple object&#39;s are equal to <code>to_remove</code>, only one
will be deleted.</p>
</div><h4 id='method.contains' class='method'><code>fn <a href='#method.contains' class='fnname'>contains</a>(&amp;self, obj: &amp;T) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></h4>
<div class='docblock'><p>Returns <code>true</code> if a given object is contained in this tree.</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><span class='in-band'><code>impl&lt;T:&nbsp;<a class='trait' href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html' title='core::clone::Clone'>Clone</a>&gt; <a class='trait' href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html' title='core::clone::Clone'>Clone</a> for <a class='struct' href='../spade/struct.RTree.html' title='spade::RTree'>RTree</a>&lt;T&gt; <span class='where'>where T: <a class='trait' href='../spade/trait.SpatialObject.html' title='spade::SpatialObject'>SpatialObject</a></span></code></span><span class='out-of-band'><div class='ghost'></div><a id='src-743' class='srclink' href='../src/spade/src/rtree.rs.html#1005' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.clone' class='method'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone' class='fnname'>clone</a>(&amp;self) -&gt; <a class='struct' href='../spade/struct.RTree.html' title='spade::RTree'>RTree</a>&lt;T&gt;</code></h4>
<div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div><h4 id='method.clone_from' class='method'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from' class='fnname'>clone_from</a>(&amp;mut self, source: &amp;Self)</code><div class='since' title='Stable since Rust version 1.0.0'>1.0.0</div></h4>
<div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></div><h3 class='impl'><span class='in-band'><code>impl&lt;T&gt; <a class='trait' href='https://doc.rust-lang.org/nightly/core/default/trait.Default.html' title='core::default::Default'>Default</a> for <a class='struct' href='../spade/struct.RTree.html' title='spade::RTree'>RTree</a>&lt;T&gt; <span class='where'>where T: <a class='trait' href='../spade/trait.SpatialObject.html' title='spade::SpatialObject'>SpatialObject</a></span></code></span><span class='out-of-band'><div class='ghost'></div><a id='src-753' class='srclink' href='../src/spade/src/rtree.rs.html#1012-1016' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.default' class='method'><code>fn <a href='https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default' class='fnname'>default</a>() -&gt; <a class='struct' href='../spade/struct.RTree.html' title='spade::RTree'>RTree</a>&lt;T&gt;</code></h4>
<div class='docblock'><p>Returns the &quot;default value&quot; for a type. <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "spade";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script defer src="../search-index.js"></script>
</body>
</html>